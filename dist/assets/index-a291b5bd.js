import{X as W,Y as r,ac as I,N as F,A as v,K as T,r as g,ad as d,W as A,a as i,J as L,j as n,$ as l,E as o,H as M,a1 as E,a2 as S}from"./index-f69be7d7.js";import{u as $,M as q,a as w}from"./useTable-ed21e2f1.js";import{u as D}from"./userImage-27756418.js";import"./IconButton-5e93c969.js";import"./Toolbar-34ee48fc.js";const b="الزبائن",u=[{id:"id",label:"رقم الفاتورة",minWidth:80,align:"center",isField:!1,isInvoice:!0,urlPath:"invoices"},{id:"value",label:"المبلغ",minWidth:100,align:"center",isField:!0,required:!0},{id:"values",label:"القيمة",minWidth:80,align:"center",isField:!0,required:!0},{id:"billType",label:"النوع",minWidth:150,align:"center",isField:!1,required:!0,options:[{value:"ادخال",id:"1"},{value:"صادر",id:"2"}]},{id:"note",label:"ملاحظة",minWidth:170,align:"left",isField:!0},{id:"createdAt",label:"التاريخ",minWidth:200,align:"center"}],p={value:0,values:0,billType:"ادخال",note:""},f=W().shape({value:r().required("المبلغ مطلوب"),values:r().required("القيمة مطلوبة"),billType:r().required("نوع الفاتورة مطلوب"),note:r()}),P=()=>{const s=I(),y=F(),a=v(e=>e.users.user),x=[{fieldName:"رقم الحساب",value:a.id||"لايوجد"},{fieldName:"النوع",value:a.userType||"لايوجد"},{fieldName:"رقم الهاتف",value:a.mobileNumber||"لايوجد"},{fieldName:"العنوان",value:a.address||"لايوجد"},{fieldName:"ملاحظة",value:a.note||"لايوجد"},{fieldName:"صافي الحساب",value:a.accountBalance||"لايوجد",isMoney:!0},{fieldName:"قيمة صافي الحساب",value:a.accountBalanceValues||"لايوجد",isMoney:!0}],{dialog:N,setDialog:c}=$(p),t=T(),m=v(e=>e.dailyRows.data),h={edit:e=>{t(E({...e,value:parseFloat(e.value),values:parseFloat(e.values),userId:e.UserId})).then(()=>t(d(s.id)))},delete:e=>t(S(e)).then(()=>t(d(s.id)))};return g.useEffect(()=>{t(d(s.id))},[]),g.useEffect(()=>{t(A({all:!0,userId:s.id,isDaily:!1}))},[]),i(L,{title:"صفحة زبون",children:n(l,{children:[i(l,{sx:{width:"100px",overflow:"hidden",margin:"auto",mb:3},children:i("img",{src:D,alt:"user image",width:"100%",style:{objectFit:"contain"}})}),n(l,{sx:{mb:6},children:[i(o,{sx:{textAlign:"center",fontWeight:"bold",fontSize:"2rem",mb:4},children:a.name}),x.map(e=>n(l,{sx:{mb:3},children:[i(o,{sx:{display:"inline-block",mr:4,fontWeight:"bold",fontSize:"1.3rem",minWidth:"120px"},children:`${e.fieldName}:`}),i(o,{sx:{display:"inline-block",direction:e.isMoney&&"rtl",textAlign:e.isMoney&&"center",color:e.isMoney?e.value>=0?"green":"tomato":"inherit",fontSize:"1.3rem",fontWeight:e.isMoney&&"bold",minWidth:"120px"},children:`${e.value}`})]},e.fieldName))]}),n(l,{children:[i(q,{columns:u,deletedLabel:`فاتورة ${b}`,setDialog:c,rows:m,COLUMNS:u,validationSchema:f,dispatchers:h}),i(M,{variant:"contained",sx:{height:"60px",margin:"2rem auto",display:"block",width:"50%"},color:"error",onClick:()=>y("invoices/add",{state:{t:"t"}}),children:"انشاء فاتورة"})]}),i(w,{title:`فاتورة ${b}`,dialog:N,setDialog:c,ROW_INTIAL_VALUE:p,FIELDS:u.filter(e=>e.isField),rows:m,validationSchema:f,dispatchers:h})]})})};export{P as default};
