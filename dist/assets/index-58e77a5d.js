import{X as N,Y as r,ac as W,N as I,A as v,K as T,r as g,ad as n,W as A,a as i,J as F,j as d,$ as t,E as o,a1 as L,a2 as M}from"./index-f69be7d7.js";import{u as E,M as S,a as $}from"./useTable-ed21e2f1.js";import{u as q}from"./userImage-27756418.js";import"./IconButton-5e93c969.js";import"./Toolbar-34ee48fc.js";const b="الزبائن",u=[{id:"id",label:"رقم الفاتورة",minWidth:80,align:"center"},{id:"value",label:"المبلغ",minWidth:100,align:"center",isField:!0,required:!0,isBill:!0},{id:"values",label:"القيمة",minWidth:80,align:"center",isField:!0,isBill:!0,required:!0},{id:"billType",label:"النوع",minWidth:150,align:"center",isField:!1,required:!0,options:[{value:"سحوبات",id:"سحوبات"},{value:"مصروف",id:"مصروف"},{value:"ادخال",id:"ادخال"},{value:"صادر",id:"صادر"}]},{id:"note",label:"ملاحظة",minWidth:170,align:"left",isField:!0},{id:"createdAt",label:"التاريخ",minWidth:200,align:"center"}],f={value:0,values:0,billType:"ادخال",note:""},p=N().shape({value:r().required("المبلغ مطلوب"),values:r().required("القيمة مطلوبة"),billType:r().required("نوع الفاتورة مطلوب"),note:r()}),j=()=>{const s=W();I();const a=v(e=>e.users.user),y=[{fieldName:"رقم الحساب",value:a.id||"لايوجد"},{fieldName:"النوع",value:a.userType||"لايوجد"},{fieldName:"رقم الهاتف",value:a.mobileNumber||"لايوجد"},{fieldName:"العنوان",value:a.address||"لايوجد"},{fieldName:"ملاحظة",value:a.note||"لايوجد"},{fieldName:"صافي الحساب",value:a.accountBalance||"لايوجد",isMoney:!0},{fieldName:"قيمة صافي الحساب",value:a.accountBalanceValues||"لايوجد",isMoney:!0}],{dialog:x,setDialog:c}=E(f),l=T(),m=v(e=>e.dailyRows.data),h={edit:e=>{l(L({...e,value:parseFloat(e.value),values:parseFloat(e.values),userId:e.UserId})).then(()=>l(n(s.id)))},delete:e=>l(M(e)).then(()=>l(n(s.id)))};return g.useEffect(()=>{l(n(s.id))},[]),g.useEffect(()=>{l(A({all:!0,userId:s.id,isDaily:!1}))},[]),i(F,{title:"صفحة زبون",children:d(t,{children:[i(t,{sx:{width:"100px",overflow:"hidden",margin:"auto",mb:3},children:i("img",{src:q,alt:"user image",width:"100%",style:{objectFit:"contain"}})}),d(t,{sx:{mb:6},children:[i(o,{sx:{textAlign:"center",fontWeight:"bold",fontSize:"2rem",mb:4},children:a.name}),y.map(e=>d(t,{sx:{mb:3},children:[i(o,{sx:{display:"inline-block",mr:4,fontWeight:"bold",fontSize:"1.3rem",minWidth:"120px"},children:`${e.fieldName}:`}),i(o,{sx:{display:"inline-block",direction:e.isMoney&&"rtl",textAlign:e.isMoney&&"center",color:e.isMoney?e.value>=0?"green":"tomato":"inherit",fontSize:"1.3rem",fontWeight:e.isMoney&&"bold",minWidth:"120px"},children:`${e.value}`})]},e.fieldName))]}),i(t,{children:i(S,{columns:u,deletedLabel:`فاتورة ${b}`,setDialog:c,rows:m,COLUMNS:u,validationSchema:p,dispatchers:h})}),i($,{title:`فاتورة ${b}`,dialog:x,setDialog:c,ROW_INTIAL_VALUE:f,FIELDS:u.filter(e=>e.isField),rows:m,validationSchema:p,dispatchers:h})]})})};export{j as default};
