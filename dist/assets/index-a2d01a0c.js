import{X as v,Z as r,Y as g,K as b,A as f,r as T,W as u,j as d,J as h,a as s,$ as L,a1 as I,a2 as D}from"./index-f69be7d7.js";import{u as F,M as S,a as A}from"./useTable-ed21e2f1.js";import{P as E}from"./PageHeading-c7717559.js";import{C as M}from"./CustomTableHeading-e03faf26.js";import"./IconButton-5e93c969.js";import"./Toolbar-34ee48fc.js";const c="سحب",m={userId:"",billType:"",id:"",name:"",value:0,values:0,note:""},U=v({value:r().required("يرجى كتابة المبلغ"),values:r().required("يرجى كتابة قيمة المبلغ"),note:g()}),q=()=>{const{dialog:p,setDialog:n,handleOpenAddDialog:W}=F(m),l=b();let a=f(e=>e.dailyRows.data).filter(e=>e.billType==="مصروف");a=a.map(e=>({name:e.User.name,billType:e.billType,userId:e.User.id,id:e.id,value:e.value,values:e.values,note:e.note,userType:e.User.userType}));const y={title:"الاجمالي",...a.reduce((e,t)=>(e.value+=t.value,e.values+=t.values,e),{value:0,values:0})},i=[{id:"id",label:"رقم الفاتورة",minWidth:80,align:"center",isField:!1},{id:"name",label:"اسم الحساب",minWidth:80,align:"center",isField:!1,isLink:!0},{id:"value",label:"المبلغ",minWidth:50,align:"center",isField:!0,format:e=>e.toLocaleString("en-US"),isMoney:!0},{id:"values",label:"القيمة",minWidth:50,align:"center",isField:!0,format:e=>e.toLocaleString("en-US"),isMoney:!0},{id:"note",label:"ملاحظة",minWidth:120,align:"left",isField:!0}],o={edit:e=>{const t={userId:e.userId,value:parseFloat(e.value,10),values:parseFloat(e.values,10),billType:e.billType,note:e.note,id:e.id};l(I(t)).then(()=>{l(u())})},delete:e=>l(D(e))};return T.useEffect(()=>{l(u())},[]),d(h,{children:[s(E,{title:"صفحة المصروف"}),d(L,{children:[s(S,{columns:i,deletedLabel:`فاتورة ${c}`,setDialog:n,rows:a,COLUMNS:i,validationSchema:!0,dispatchers:o}),s(M,{rows:y})]}),s(A,{title:`فاتورة ${c}`,dialog:p,setDialog:n,ROW_INTIAL_VALUE:m,FIELDS:i.filter(e=>e.isField),rows:a,validationSchema:U,dispatchers:o})]})};export{q as default};
